# -*- coding: utf-8 -*-
"""
Spyder Editor

This is a temporary script file.
"""

from flask import Flask, request, jsonify, render_template
import pickle
import pandas as pd
import numpy as np

model = pickle.load(open('DIDUNAS_predictive_model202305.pkl','rb'))


app=Flask(__name__,template_folder='template')

@app.route('/')
def home():
    return render_template('page.htm')

@app.route('/predict', methods=['POST'])

def predict():
    features_list = []
    features_list.append(request.form.get("plus"))
    features_list.append(request.form.get("minus"))
    features_list.append(request.form.get("quantities"))
    features_list.append(request.form.get("hiddenNumber"))
    features_list.append(request.form.get("numberLine"))
    features_list.append(request.form.get("numberPattern"))
    features_list.append(request.form.get("numberComparison"))
    features_list.append(request.form.get("quantityComparison"))
    features_list.append(request.form.get("colorPattern"))
    features_list.append(request.form.get("completionToTen"))
    
    features = np.array(features_list).reshape([1,10])
    predict_RMD, predict_pValue = model.hybrid_prediction(features) #note that here both Y/N predciton and a P-value predciotion are made.

    if predict_RMD>0:
        RMD='T'
    else:
        RMD='F'
    return render_template('page.htm',prediction_display_area='RMDï¼š{}'.format(RMD))
    
    
if __name__ == "__main__":
    app.run(port=80,debug = True)
